Resultæ¥è¿”å›

å¯†ç ç”¨Md5åŠ å¯†

ThreadLocalUtilæ˜¯ç”¨æ¥å­˜æ”¾ä»¤ç‰Œçš„ï¼Œ  .set()æ˜¯å­˜æ”¾ï¼Œ.get()æ˜¯æ‹¿å–

ç™»å½•ç”¨Jwtä»¤ç‰Œï¼ˆInterceptorsæ˜¯æ‹¦æˆªå™¨ï¼ŒWebConfigæ˜¯åœ¨æ³¨å†Œæ‹¦æˆªå™¨ï¼‰






Jwtä»¤ç‰Œçš„åˆ›å»ºå¹¶ä½¿ç”¨
Map<String,Object> claims = new HashMap<>();
claims.put("id",LoginUser.getId());
claims.put("username",LoginUser.getUsername());
String token = JwtUtil.genToken(claims);

ä¸‹è¾¹è¿™ä¸ªç›´æ¥ç”¨æ‹¦æˆªå™¨ä¹Ÿè¡Œ
public Result<String> list(@RequestHeader(name = "Authorization") String token){			@RequestHeader(name = "Authorization")  è§£æåå­—ä¸ºAuthorizationçš„ä»¤ç‰Œ
	try {
		Map<String,Object> claims = JwtUtil.parseToken(token);
		return Result.success("æ‰€æœ‰çš„æ–‡ç« æ•°æ®...");
	} catch (Exception e) {
		return Result.error("æœªç™»å½•");
	}
}

ç”¨äº†æ‹¦æˆªå™¨è¿™æ ·å°±è¡Œäº†ğŸ‘‡
public Result<String> list(){
	return Result.success("æ‰€æœ‰çš„æ–‡ç« æ•°æ®...");
}

æŸ¥çœ‹ä¸ªäººä¿¡æ¯çš„æ—¶å€™ğŸ‘‡
public Result<User> userInfo(@RequestHeader(name = "Authorization") String token ){		
	Map<String,Object> map = JwtUtil.parseToken(token);									mapè·å–è¿™ä¸ªä»¤ç‰Œ
	String username = map.get("username").toString();									è·å–usernameçš„å€¼å¹¶è½¬ä¸ºString
	User user = userService.findByUserName(username);									æ ¹æ®è¿™ä¸ªusernameæŸ¥æ‰¾ä¿¡æ¯
	return Result.success(user);								
}